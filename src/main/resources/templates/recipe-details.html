<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/commons::head}">
    <title>Recipe Details</title>
</head>
<body class="recipe-details-page d-flex flex-column h-100">
<header th:replace="~{fragments/commons::header}"></header>
<main class="flex-shrink-0">
    <div class="container my-5">
        <div th:object="${recipe}" class="card recipe-card mx-auto" style="max-width: 900px;">
            <img th:src="*{image}" class="card-img-top" alt="Recipe Image">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h1 th:text="*{title}" class="card-title mb-0">Spaghetti Carbonara</h1>
                    <form th:action="@{/like/{id}(id=${recipe.id})}" method="post"
                          class="d-flex justify-content-between align-items-center mt-4">
                        <button th:unless="${isCreator}" type="submit" class="btn-like btn btn-primary">Like Recipe</button>
                        <p class="mb-0"><strong>Likes:</strong> <span th:text="*{likes}">120</span></p>
                    </form>
                </div>
                <p class="card-text text-muted text-center">Published on: <strong th:text="*{createdDate}">Dec 28,
                    2024</strong></p>
                <p th:text="*{description}" class="card-text mb-4">A creamy and delicious Italian classic, made with
                    eggs, cheese, pancetta, and black pepper. Quick and easy to make, it's the perfect meal for any
                    time!</p>

                <h3>Ingredients</h3>
                <ul th:each="ingredient : *{ingredients}">
                    <li th:text="${ingredient}">200g spaghetti</li>
                </ul>

                <h3>Steps</h3>
                <p th:text="*{instructions}"></p>

                <a th:href="@{/recipe/edit}" class="btn-recipes btn btn-primary">Edit Recipe</a>
            </div>
        </div>

        <!-- Comments Section -->
        <div class="comments-section mt-5">
            <h2 class="text-center mb-4">Comments</h2>

            <!-- Comment Form -->
            <div class="card shadow-sm p-3 mb-4">
                <form>
                    <div class="mb-3">
                        <textarea class="form-control" rows="3" placeholder="Add a comment..."></textarea>
                    </div>
                    <button type="submit" class="btn-add-comment btn btn-primary w-100">Post Comment</button>
                </form>
            </div>

            <!-- List of Comments -->
            <div class="comment-card card">
                <div class="card-body">
                    <p class="comment-author mb-1">John Doe</p>
                    <p class="comment-text">This recipe is amazing! My family loved it!</p>
                    <p class="comment-time text-end mb-0">2 hours ago</p>
                </div>
            </div>

            <div class="comment-card card">
                <div class="card-body">
                    <p class="comment-author mb-1">Jane Smith</p>
                    <p class="comment-text">I tried this with some extra garlic, and it was delicious!</p>
                    <p class="comment-time text-end mb-0">5 hours ago</p>
                </div>
            </div>
        </div>
    </div>
</main>

<footer th:replace="~{fragments/commons::footer}"></footer>
</body>
</html>
